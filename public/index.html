<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
  <script type="text/javascript" src="js/components.js"></script>

  <link rel="stylesheet" type="text/css" href="css/components.css">
  <link rel="stylesheet" type="text/css" href="css/app.css">

</head>
<body>

  <x-shiftbox shift="right">
    <aside>
      <menu id="sideMenu">
        <button data-action="sync">Sync</button>
        <button data-action="refresh">Refresh</button>
      </menu>
    </aside>
    <section>
      <x-appbar><div>=</div><header id="header">Web App Header</header><div>+</div></x-appbar>
      <section>Main App Content</section>
    </section>
  </x-shiftbox>

  <x-modal hidden overlay esc-hide>Modal</x-modal>

</body>

<script type="text/javascript">

  var appbar = document.querySelector('x-appbar');
  var shiftbox = document.querySelector('x-shiftbox');
  var modal = document.querySelector('x-modal');

  document.addEventListener('dbconnected', function(e){
    window.dbconnection = e.server;
    Column.myColumns(function(results){
      results.forEach(function(item){
          createColumn(item.name, item.feeds, item.headerColor);
      });
    });
  });

  xtag.addEvents(document, {
    'tap:delegate(x-appbar > div:first-child)': function(){
      shiftbox.toggle();
    },
    'tap:delegate(x-appbar > div:last-child)': function(){
      modal.toggle();
    },
    'tap:delegate(#sideMenu > button)': function(e){
        console.log('menu action', e.target.dataset.action);
    }
  });

</script>
</html>